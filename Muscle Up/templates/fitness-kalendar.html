<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; connect-src *;">
    <link rel="stylesheet" href="{{ url_for('static', filename='nav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Muscle Up | Fitness-Kalender</title>
</head>
<body>
    <div class="wrapper">
        <header class="head">
            <h1 class="headline">Fitness-Kalender</h1>
            <div class="nav-bar">
                 <h1 class="headline">Muscle Up</h1>

                <nav class="nav-top">
                    <a href="{{ url_for('index') }}" class="link">Home</a>
                    <a href="{{ url_for('profile') }}" class="link">Mein Profil</a>
                    <a href="{{ url_for('workout_page') }}" class="link">Training</a>
                </nav>

        {% if 'user_id' in session %}
        <div class="nav-user">
            <div class="dropdown">
                <button class="dropbtn">
                    <img src="{{ url_for('static', filename='default.png.png') }}" 
                        alt="Profil" class="profile-pic">
                </button>
                <div class="dropdown-content">
                    <span class="username">{{ session['username'] }}</span>
                    <a href="{{ url_for('profile') }}">Mein Profil</a>
                    <a href="{{ url_for('logout') }}">Logout</a>
                </div>
            </div>
        </div>
        {% else %}
        <nav class="nav-top">
            <a href="{{ url_for('login') }}">Login</a>
            <a href="{{ url_for('register') }}">Registrieren</a>
        </nav>
        {% endif %}

        <button class="hamburger" onclick="toggleMenu()">☰</button>
    </div>

    <nav class="mobile-menu" id="mobileMenu">
        <a href="{{ url_for('index') }}">Start</a>
        <a href="{{ url_for('workout_page') }}">Training</a>

        {% if 'user_id' in session %}
            <a href="{{ url_for('profile') }}">Mein Profil</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login</a>
            <a href="{{ url_for('register') }}">Registrieren</a>
        {% endif %}
    </nav>
</header>
        <main class="content">
            <section class="workout-calendar">
                {% for day, workouts in workout_by_day.items() %}
                <div class="day-block">
                    <h3>{{ day }}</h3>
                    {% for workout in workouts %}
                    <div class="workout-card">
                        <div>
                            {% if workout.type == "strength" %}
                                <strong>Krafttraining: {{ workout.exercise }}</strong>
                                <ul>
                                    {% for set in workout.sets %}
                                        <li>Gewicht: {{ set.weight }}kg | Wdh.: {{ set.reps }}</li>
                                    {% endfor %}
                                </ul>
                            {% elif workout.type == "cardio" %}
                                <strong>Cardio: {{ workout.exercise }}</strong>
                                <p>Dauer: {{ workout.duration }}min
                                {% if workout.distance %}
                                    | Strecke: {{ workout.distance }}km
                                {% endif %}
                                {% if workout.sportart %}
                                    | Sportart: {{ workout.sportart }}
                                {% endif %}
                                </p>
                            {% elif workout.type == "restday" %}
                                <strong>Ruhetag</strong>
                            {% endif %}
                        </div>
                        <form method="post" action="{{ url_for('delete_workout_from_calendar', workout_id=workout.id) }}">
                            <button type="submit" class="delete-btn">Löschen</button>
                        </form>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </section>
        </main>

        <footer>
            &copy; 2024 Muscle Up | <a href="#" class="link">Impressum</a>
        </footer>
    </div>

</body>
<script>
function toggleMenu() {
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenu.classList.toggle('active');
}
</script>
</html>